import{a as s,b as u}from"./chunk-B4WDAWNQ.js";import{a as c,f as l}from"./chunk-OM4WM6OA.js";import{a as n}from"./chunk-RW4GY4BD.js";var m=(()=>{let e=class e{constructor(){this.trabajadoresSubject=new c([]),this.trabajadores$=this.trabajadoresSubject.asObservable(),this.token=localStorage.getItem("token")}getTrabajadoresByUsuarioId(a){let r=`${u.url}trabajadores/${a}`;return s.get({url:r,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}}).then(t=>{if(console.log("Trabajadores obtenidos:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return this.trabajadoresSubject.next(t.data),t.data}).catch(t=>{throw console.error("Error al obtener trabajadores:",t),t})}getTrabajadorById(a){let r=`${u.url}trabajadores/trabajador/${a}`;return s.get({url:r,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}}).then(t=>{if(console.log("Trabajadores obtenidos:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al obtener trabajadores:",t),t})}createTrabajador(a){let r=`${u.url}trabajadores`;return console.log(a),s.post({url:r,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},data:a}).then(t=>{let o=this.trabajadoresSubject.getValue();if(this.trabajadoresSubject.next([...o,t.data]),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al crear trabajador:",t),t})}updateTrabajador(a,r){let t=`${u.url}trabajadores/${a}`;return console.log(r),s.put({url:t,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},data:r}).then(o=>{if(console.log("Trabajador actualizado:",o),o.status===404||o.status===401)throw{status:o.status,message:o.data.error};return this.reemplazarTrabajador(a,r),o.data}).catch(o=>{throw console.error("Error al actualizar trabajador:",o),o})}deleteTrabajador(a){let r=`${u.url}trabajadores/${a}`;return s.delete({url:r,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}}).then(t=>{if(console.log("Trabajador eliminado:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return this.borrarTrabajador(a),t.data}).catch(t=>{throw console.error("Error al eliminar trabajador:",t),t})}reemplazarTrabajador(a,r){let t=this.trabajadoresSubject.getValue().map(o=>o.id===a?n(n({},o),r):o);this.trabajadoresSubject.next(t)}borrarTrabajador(a){let r=this.trabajadoresSubject.getValue().filter(t=>t.id!==a);this.trabajadoresSubject.next(r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{m as a};
