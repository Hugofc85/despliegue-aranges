import{a as X}from"./chunk-FUC3LGTJ.js";import"./chunk-ENQTIPMM.js";import{M as K,V as Q,Z as W,a as R,d as U,e as H,m as J}from"./chunk-JZDIRMBR.js";import{C as G,D as Y,F as q,l as B}from"./chunk-2UXU5CYN.js";import{$ as c,A as b,Aa as E,Ca as y,Cb as V,D as f,Db as D,Eb as L,F as v,Fb as A,L as e,M as t,N as a,R as x,S as C,T as _,jb as S,l as O,lb as I,m as M,mb as z,nb as F,qa as k,rb as T,t as s,tb as N,u as g,va as w,w as h,wb as j}from"./chunk-IIYMI45M.js";import"./chunk-QWLURI7L.js";import"./chunk-7KGURMOZ.js";import"./chunk-746R66HB.js";import"./chunk-22YGHXDB.js";import"./chunk-A5VEOJWE.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-4DUJ2VZY.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as u}from"./chunk-RW4GY4BD.js";function $(r,l){r&1&&(e(0,"div",9)(1,"div",10),a(2,"div",11),t(),e(3,"p"),c(4,"Cargando datos del cliente..."),t()())}function nn(r,l){if(r&1){let m=x();e(0,"div",12)(1,"div",13),a(2,"ion-icon",14),t(),e(3,"p"),c(4,"No se pudieron cargar los datos del cliente."),t(),e(5,"button",4),C("click",function(){O(m);let n=_();return M(n.volver())}),e(6,"span"),c(7,"Volver a la lista"),t()()()}}function en(r,l){r&1&&(e(0,"div",35),c(1," El nombre es obligatorio "),t())}function tn(r,l){if(r&1){let m=x();e(0,"div",15)(1,"form",16),C("ngSubmit",function(){O(m);let n=_();return M(n.guardarCambios())}),e(2,"div",17)(3,"div",18)(4,"label",19),c(5,"Nombre "),e(6,"span",20),c(7,"*"),t()()(),e(8,"div",21)(9,"div",22),a(10,"ion-icon",23),t(),a(11,"input",24),t(),b(12,en,2,0,"div",25),t(),e(13,"div",17)(14,"div",18)(15,"label",26),c(16,"Tel\xE9fono"),t()(),e(17,"div",21)(18,"div",22),a(19,"ion-icon",27),t(),a(20,"input",28),t()(),e(21,"div",17)(22,"div",18)(23,"label",29),c(24,"Direcci\xF3n"),t()(),e(25,"div",21)(26,"div",22),a(27,"ion-icon",30),t(),a(28,"input",31),t()(),e(29,"div",32)(30,"button",33),a(31,"ion-icon",34),e(32,"span"),c(33,"Guardar Cambios"),t()()()()()}if(r&2){let m=_();s(),f("formGroup",m.clienteForm),s(7),v("has-error",m.hasError("nombre","required")),s(4),f("ngIf",m.hasError("nombre","required")),s(18),f("disabled",m.clienteForm.invalid||m.isSubmitting)}}var un=(()=>{let l=class l{constructor(o,n,i,d,P,p,Z){this.formBuilder=o,this.clienteService=n,this.navController=i,this.toastController=d,this.loadingController=P,this.route=p,this.router=Z,this.clienteId=null,this.isLoading=!0,this.loadError=!1,this.isSubmitting=!1,this.clienteForm=this.formBuilder.group({nombre:["",[I.required]],telefono:[""],direccion:[""]})}ngOnInit(){R({personOutline:Q,callOutline:J,locationOutline:K,arrowBackOutline:H,saveOutline:W,alertCircleOutline:U}),this.route.paramMap.subscribe(o=>{let n=o.get("id");n?(this.clienteId=+n,this.cargarDatosCliente(this.clienteId)):(this.isLoading=!1,this.loadError=!0)})}cargarDatosCliente(o){return u(this,null,function*(){try{let n=yield this.clienteService.getClienteById(o);n?(console.log(n[0]),this.clienteForm.patchValue({nombre:n[0].nombre||"",telefono:n[0].telefono||"",direccion:n[0].direccion||""}),this.isLoading=!1):(this.loadError=!0,this.isLoading=!1)}catch(n){console.error("Error al cargar los datos del cliente:",n),this.loadError=!0,this.isLoading=!1}})}get f(){return this.clienteForm.controls}hasError(o,n){let i=this.f[o];return i.hasError(n)&&(i.dirty||i.touched)}volver(){this.navController.back()}guardarCambios(){return u(this,null,function*(){var o,n,i;if(Object.keys(this.f).forEach(d=>{this.f[d].markAsTouched()}),this.clienteForm.invalid){this.mostrarToast("Por favor, completa correctamente todos los campos obligatorios","danger");return}if(!this.clienteId){this.mostrarToast("No se ha especificado un cliente para editar","danger");return}try{this.isSubmitting=!0;let d=yield this.loadingController.create({message:"Guardando cambios...",spinner:"circles"});yield d.present();let p={id:(yield this.clienteService.getClienteById(this.clienteId))[0].id,nombre:(o=this.clienteForm.get("nombre"))==null?void 0:o.value,telefono:(n=this.clienteForm.get("telefono"))==null?void 0:n.value,direccion:(i=this.clienteForm.get("direccion"))==null?void 0:i.value};console.log(p),yield this.clienteService.updateCliente(this.clienteId,p),yield d.dismiss(),this.mostrarToast("Cliente actualizado correctamente","success"),this.router.navigate(["/clientes"])}catch(d){console.error("Error al actualizar el cliente:",d),this.isSubmitting=!1,this.loadingController.dismiss(),this.mostrarToast("Error al actualizar el cliente. Int\xE9ntalo de nuevo.","danger")}})}mostrarToast(o,n="primary"){return u(this,null,function*(){yield(yield this.toastController.create({message:o,duration:3e3,position:"bottom",color:n,buttons:[{icon:"close-circle-outline",role:"cancel"}]})).present()})}};l.\u0275fac=function(n){return new(n||l)(g(V),g(X),g(A),g(Y),g(G),g(E),g(y))},l.\u0275cmp=h({type:l,selectors:[["app-cliente-edit"]],decls:13,vars:3,consts:[[1,"ion-content-editar-cliente"],[1,"premium-editar-cliente-container"],[1,"section-header"],[1,"header-back-button"],[1,"back-button",3,"click"],["name","arrow-back-outline"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","form-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"spinner"],[1,"error-container"],[1,"error-icon"],["name","alert-circle-outline"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label"],["for","nombre"],[1,"required"],[1,"input-container"],[1,"input-icon"],["name","person-outline"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre del cliente",1,"form-input"],["class","error-message",4,"ngIf"],["for","telefono"],["name","call-outline"],["type","tel","id","telefono","formControlName","telefono","placeholder","N\xFAmero de tel\xE9fono",1,"form-input"],["for","direccion"],["name","location-outline"],["type","text","id","direccion","formControlName","direccion","placeholder","Direcci\xF3n del cliente",1,"form-input"],[1,"form-actions"],["type","submit",1,"save-button",3,"disabled"],["name","save-outline"],[1,"error-message"]],template:function(n,i){n&1&&(e(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),C("click",function(){return i.volver()}),a(5,"ion-icon",5),e(6,"span"),c(7,"Volver"),t()()(),e(8,"h1"),c(9,"Editar Cliente"),t()(),b(10,$,5,0,"div",6)(11,nn,8,0,"div",7)(12,tn,34,5,"div",8),t()()),n&2&&(s(10),f("ngIf",i.isLoading),s(),f("ngIf",i.loadError),s(),f("ngIf",!i.isLoading&&!i.loadError))},dependencies:[w,k,D,T,S,z,F,L,N,j,B,q],styles:['@charset "UTF-8";.premium-editar-cliente-container[_ngcontent-%COMP%]{padding:20px;min-height:100%;background-color:#0a1e3f;color:#fff}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]{margin-right:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:8px;padding:8px 16px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:8px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.2)}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-bottom:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#4caf50;animation:_ngcontent-%COMP%_spin 1s linear infinite}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#ffffffe6;text-align:center;margin:0}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-bottom:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px;color:#ff5252}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#ffffffe6;text-align:center;margin:0 0 20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:8px;padding:8px 16px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ff5252;margin-left:4px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff1a;border-radius:12px;border:1px solid rgba(255,255,255,.2);overflow:hidden;transition:all .3s ease}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]:focus-within{border-color:#fff6;box-shadow:0 0 0 2px #ffffff1a}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container.has-error[_ngcontent-%COMP%]{border-color:#ff5252;box-shadow:0 0 0 2px #ff525233}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;color:#ffffffb3;font-size:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;color:#fff;padding:14px 16px 14px 0;font-size:16px;font-family:inherit}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:8px;color:#ff5252;font-size:14px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]:before{content:"\\2022";margin-right:6px;font-size:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:32px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;background:linear-gradient(135deg,#00796b,#4caf50);color:#fff;border:none;border-radius:12px;padding:16px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 20px #0003}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:8px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000004d}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 6px 15px #0003}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{background:#ffffff1a;color:#ffffff80;box-shadow:none;cursor:not-allowed}@media (max-width: 768px){.premium-editar-cliente-container[_ngcontent-%COMP%]{padding:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]{margin-right:0;margin-bottom:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:15px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{width:40px;font-size:18px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding:12px 14px 12px 0;font-size:15px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{padding:14px;font-size:15px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}}@media (min-width: 768px){.premium-editar-cliente-container[_ngcontent-%COMP%]{padding:30px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.form-container[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.ion-content-editar-cliente[_ngcontent-%COMP%]{--background: #0a1e3f}[_nghost-%COMP%]     ion-toast{--background: #162b4d;--color: #ffffff;--border-radius: 8px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .2)}[_nghost-%COMP%]     ion-toast.toast-success{--background: #4caf50}[_nghost-%COMP%]     ion-toast.toast-danger{--background: #ff5252}']});let r=l;return r})();export{un as ClienteEditPage};
