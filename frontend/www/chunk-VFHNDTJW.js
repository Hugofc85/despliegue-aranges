import{a as e,b as n}from"./chunk-B4WDAWNQ.js";import{f as c}from"./chunk-64PFJSTE.js";var h=(()=>{let a=class a{constructor(){}getIdUsuario(){let r=localStorage.getItem("token");if(!r)return null;try{let o=r.split(".")[1],t=atob(o);return JSON.parse(t).userId||null}catch(o){return console.error("Error al decodificar el token:",o),null}}getUsuarioById(r){let o=`${n.url}usuarios/${r}`;return e.get({url:o,headers:{"Content-Type":"application/json"}}).then(t=>{var s;if(console.log("Usuario obtenido:",t),t.status===404||t.status===401)throw{status:t.status,message:((s=t.data)==null?void 0:s.error)||"Error desconocido"};return t.data}).catch(t=>{throw console.error("Error al obtener usuario:",t),t})}login(r={correo:"",contrasena:""}){let o=`${n.url}auth/login`;return console.log("Usuario:",JSON.stringify(r)),console.log("URL:",o),e.post({url:o,headers:{"Content-Type":"application/json"},data:r}).then(t=>{if(console.log("Respuesta del servidor:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error en el login:",t),t})}registro(r={nombre:"",correo:"",contrasena:""}){let o=`${n.url}auth/registro`;return e.post({url:o,headers:{"Content-Type":"application/json"},data:r}).then(t=>{if(console.log("Respuesta del servidor:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error en el login:",t),t})}};a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=c({token:a,factory:a.\u0275fac,providedIn:"root"});let l=a;return l})();export{h as a};
