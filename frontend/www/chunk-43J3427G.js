import{a as i,b as l}from"./chunk-B4WDAWNQ.js";import{a as u,f as c}from"./chunk-OM4WM6OA.js";import{a as s}from"./chunk-RW4GY4BD.js";var m=(()=>{let o=class o{constructor(){this.clientesSubject=new u([]),this.clientes$=this.clientesSubject.asObservable(),this.token=localStorage.getItem("token")}getAllClientes(){let a=`${l.url}clientes`;return i.get({url:a,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}}).then(e=>{if(console.log("Clientes obtenidos:",e),e.status===404||e.status===401)throw{status:e.status,message:e.data.error};return this.clientesSubject.next(e.data),e.data}).catch(e=>{throw console.error("Error al obtener clientes:",e),e})}getClienteById(a){let e=`${l.url}clientes/${a}`;return i.get({url:e,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}}).then(t=>{if(console.log("Cliente obtenido:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al obtener cliente:",t),t})}getClientesByUsuarioId(a){let e=`${l.url}clientes/usuario/${a}`;return i.get({url:e,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}}).then(t=>{if(console.log("Clientes obtenidos por usuario:",t.data),this.clientesSubject.next(t.data),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al obtener clientes por usuario:",t),t})}createCliente(a){let e=`${l.url}clientes`;return console.log(a),i.post({url:e,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},data:a}).then(t=>{let r=this.clientesSubject.getValue();if(this.clientesSubject.next([...r,t.data]),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al crear cliente:",t),t})}updateCliente(a,e){let t=`${l.url}clientes/${a}`;return console.log(e),i.put({url:t,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"},data:e}).then(r=>{if(console.log("Cliente actualizado:",r),r.status===404||r.status===401)throw{status:r.status,message:r.data.error};return this.reemplazarCliente(a,e),r.data}).catch(r=>{throw console.error("Error al actualizar cliente:",r),r})}deleteCliente(a){let e=`${l.url}clientes/${a}`;return i.delete({url:e,headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}}).then(t=>{if(console.log("Cliente eliminado:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return this.borrarCliente(a),t.data}).catch(t=>{throw console.error("Error al eliminar cliente:",t),t})}reemplazarCliente(a,e){let t=this.clientesSubject.getValue().map(r=>r.id===a?s(s({},r),e):r);this.clientesSubject.next(t)}borrarCliente(a){let e=this.clientesSubject.getValue().filter(t=>t.id!==a);this.clientesSubject.next(e)}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();export{m as a};
