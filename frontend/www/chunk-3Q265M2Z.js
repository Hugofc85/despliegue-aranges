import{a as n,b as c}from"./chunk-B4WDAWNQ.js";import{a as i,f as l}from"./chunk-IIYMI45M.js";import{a as u}from"./chunk-RW4GY4BD.js";var p=(()=>{let e=class e{constructor(){this.encargosSubject=new i([]),this.encargos$=this.encargosSubject.asObservable()}getAllEncargos(){let a=`${c.url}encargos`;return n.get({url:a,headers:{"Content-Type":"application/json"}}).then(r=>{if(r.status>=400)throw r;return this.encargosSubject.next(r.data),r.data}).catch(r=>{throw console.error("Error al obtener encargos:",r),r})}getEncargoById(a){let r=`${c.url}encargos/${a}`;return n.get({url:r,headers:{"Content-Type":"application/json"}}).then(t=>{if(t.status>=400)throw t;return t.data}).catch(t=>{throw console.error("Error al obtener encargo:",t),t})}getEncargosByUsuarioId(a){let r=`${c.url}encargos/usuario/${a}`;return n.get({url:r,headers:{"Content-Type":"application/json"}}).then(t=>{if(t.status>=400)throw t;return this.encargosSubject.next(t.data),t.data}).catch(t=>{throw console.error("Error al obtener encargos por usuario:",t),t})}createEncargo(a){let r=`${c.url}encargos`;return n.post({url:r,headers:{"Content-Type":"application/json"},data:a}).then(t=>{if(t.status>=400)throw t;let o=this.encargosSubject.getValue();return this.encargosSubject.next([...o,t.data]),t.data}).catch(t=>{throw console.error("Error al crear encargo:",t),t})}updateEncargo(a,r){let t=`${c.url}encargos/${a}`;return n.put({url:t,headers:{"Content-Type":"application/json"},data:r}).then(o=>{if(o.status>=400)throw o;return this.reemplazarEncargo(a,r),o.data}).catch(o=>{throw console.error("Error al actualizar encargo:",o),o})}deleteEncargo(a){let r=`${c.url}encargos/${a}`;return n.delete({url:r,headers:{"Content-Type":"application/json"}}).then(t=>{if(t.status>=400)throw t;return this.borrarEncargo(a),t.data}).catch(t=>{throw console.error("Error al eliminar encargo:",t),t})}reemplazarEncargo(a,r){let t=this.encargosSubject.getValue().map(o=>o.id===a?u(u({},o),r):o);this.encargosSubject.next(t)}borrarEncargo(a){let r=this.encargosSubject.getValue().filter(t=>t.id!==a);this.encargosSubject.next(r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();export{p as a};
