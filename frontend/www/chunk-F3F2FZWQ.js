import{a as tn}from"./chunk-XRY2WZPH.js";import"./chunk-X2VJEU3B.js";import{N as $,Q as nn,a as H,d as J,e as K,o as Q,s as W,v as X,x as Z}from"./chunk-AARDIVPE.js";import{e as G,n as Y,o as R,q as U}from"./chunk-DIZ7QDBN.js";import{A as _,D as g,F as h,J as t,K as e,L as s,P as v,Q as C,R as P,Z as c,bb as z,db as k,eb as T,fb as F,jb as N,kb as j,l as b,lb as V,m as x,ma as E,ob as q,qa as y,sa as S,t as l,u as p,ua as I,ub as L,vb as A,w,wb as B,xb as D}from"./chunk-OOWOQ5GQ.js";import"./chunk-NG6DNF3C.js";import"./chunk-7KGURMOZ.js";import"./chunk-TXAZYJNE.js";import"./chunk-T4LVKIJM.js";import"./chunk-GQVKPUXJ.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-GO752FNZ.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as u}from"./chunk-RW4GY4BD.js";function en(i,a){i&1&&(t(0,"div",9)(1,"div",10),s(2,"div",11),e(),t(3,"p"),c(4,"Cargando datos del producto..."),e()())}function on(i,a){if(i&1){let d=v();t(0,"div",12)(1,"div",13),s(2,"ion-icon",14),e(),t(3,"p"),c(4,"No se pudieron cargar los datos del producto."),e(),t(5,"button",4),C("click",function(){b(d);let n=P();return x(n.volver())}),t(6,"span"),c(7,"Volver a la lista"),e()()()}}function rn(i,a){i&1&&(t(0,"div",32),c(1," El nombre es obligatorio "),e())}function cn(i,a){i&1&&(t(0,"div",32),c(1," El precio es obligatorio "),e())}function an(i,a){if(i&1){let d=v();t(0,"div",15)(1,"form",16),C("ngSubmit",function(){b(d);let n=P();return x(n.guardarCambios())}),t(2,"div",17)(3,"div",18)(4,"label",19),c(5,"Nombre "),t(6,"span",20),c(7,"*"),e()()(),t(8,"div",21)(9,"div",22),s(10,"ion-icon",23),e(),s(11,"input",24),e(),_(12,rn,2,0,"div",25),e(),t(13,"div",17)(14,"div",18)(15,"label",26),c(16,"Precio "),t(17,"span",20),c(18,"*"),e()()(),t(19,"div",21)(20,"div",22),s(21,"ion-icon",27),e(),s(22,"input",28),e(),_(23,cn,2,0,"div",25),e(),t(24,"div",29)(25,"button",30),s(26,"ion-icon",31),t(27,"span"),c(28,"Guardar Cambios"),e()()()()()}if(i&2){let d=P();l(),g("formGroup",d.productoForm),l(7),h("has-error",d.hasError("nombre","required")),l(4),g("ngIf",d.hasError("nombre","required")),l(7),h("has-error",d.hasError("precio","required")),l(4),g("ngIf",d.hasError("precio","required")),l(2),g("disabled",d.productoForm.invalid||d.isSubmitting)}}var On=(()=>{let a=class a{constructor(o,n,r,f,m,O,M){this.formBuilder=o,this.productoService=n,this.navController=r,this.toastController=f,this.loadingController=m,this.route=O,this.router=M,this.productoId=null,this.isLoading=!0,this.loadError=!1,this.isSubmitting=!1,this.productoForm=this.formBuilder.group({nombre:["",[k.required]],precio:["",[k.required]],descripcion:[""],stock:[""]})}ngOnInit(){H({pricetagOutline:$,cashOutline:Q,documentTextOutline:Z,cubeOutline:X,arrowBackOutline:K,saveOutline:nn,alertCircleOutline:J,closeCircleOutline:W}),this.route.paramMap.subscribe(o=>{let n=o.get("id");n?(this.productoId=+n,this.cargarDatosProducto(this.productoId)):(this.isLoading=!1,this.loadError=!0)})}cargarDatosProducto(o){return u(this,null,function*(){try{let n=yield this.productoService.getProductoById(o);n?(this.productoForm.patchValue({nombre:n[0].nombre||"",precio:n[0].precio||"",descripcion:n[0].descripcion||"",stock:n[0].stock||""}),this.isLoading=!1):(this.loadError=!0,this.isLoading=!1)}catch(n){console.error("Error al cargar los datos del producto:",n),this.loadError=!0,this.isLoading=!1}})}get f(){return this.productoForm.controls}hasError(o,n){let r=this.f[o];return r.hasError(n)&&(r.dirty||r.touched)}volver(){this.navController.back()}guardarCambios(){return u(this,null,function*(){var o,n,r,f;if(Object.keys(this.f).forEach(m=>{this.f[m].markAsTouched()}),this.productoForm.invalid){this.mostrarToast("Por favor, completa correctamente todos los campos obligatorios","danger");return}if(!this.productoId){this.mostrarToast("No se ha especificado un producto para editar","danger");return}try{this.isSubmitting=!0;let m=yield this.loadingController.create({message:"Guardando cambios...",spinner:"circles"});yield m.present();let M={id:(yield this.productoService.getProductoById(this.productoId))[0].id,nombre:(o=this.productoForm.get("nombre"))==null?void 0:o.value,precio:(n=this.productoForm.get("precio"))==null?void 0:n.value,descripcion:(r=this.productoForm.get("descripcion"))==null?void 0:r.value,stock:(f=this.productoForm.get("stock"))==null?void 0:f.value};yield this.productoService.updateProducto(this.productoId,M),yield m.dismiss(),this.mostrarToast("Producto actualizado correctamente","success"),this.router.navigate(["/productos"])}catch(m){console.error("Error al actualizar el producto:",m),this.isSubmitting=!1,this.loadingController.dismiss(),this.mostrarToast("Error al actualizar el producto. Int\xE9ntalo de nuevo.","danger")}})}mostrarToast(o,n="primary"){return u(this,null,function*(){yield(yield this.toastController.create({message:o,duration:3e3,position:"bottom",color:n,buttons:[{icon:"close-circle-outline",role:"cancel"}]})).present()})}};a.\u0275fac=function(n){return new(n||a)(p(L),p(tn),p(D),p(R),p(Y),p(S),p(I))},a.\u0275cmp=w({type:a,selectors:[["app-producto-edit"]],decls:13,vars:3,consts:[[1,"ion-content-editar-producto"],[1,"premium-editar-cliente-container"],[1,"section-header"],[1,"header-back-button"],[1,"back-button",3,"click"],["name","arrow-back-outline"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","form-container",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"spinner"],[1,"error-container"],[1,"error-icon"],["name","alert-circle-outline"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label"],["for","nombre"],[1,"required"],[1,"input-container"],[1,"input-icon"],["name","pricetag-outline"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre del producto",1,"form-input"],["class","error-message",4,"ngIf"],["for","precio"],["name","cash-outline"],["type","number","id","precio","formControlName","precio","placeholder","Precio del producto",1,"form-input"],[1,"form-actions"],["type","submit",1,"save-button",3,"disabled"],["name","save-outline"],[1,"error-message"]],template:function(n,r){n&1&&(t(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),C("click",function(){return r.volver()}),s(5,"ion-icon",5),t(6,"span"),c(7,"Volver"),e()()(),t(8,"h1"),c(9,"Editar Producto"),e()(),_(10,en,5,0,"div",6)(11,on,8,0,"div",7)(12,an,29,8,"div",8),e()()),n&2&&(l(10),g("ngIf",r.isLoading),l(),g("ngIf",r.loadError),l(),g("ngIf",!r.isLoading&&!r.loadError))},dependencies:[y,E,A,N,z,j,T,F,B,V,q,G,U],styles:['@charset "UTF-8";.premium-editar-cliente-container[_ngcontent-%COMP%]{padding:20px;min-height:100%;background-color:#0a1e3f;color:#fff}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]{margin-right:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:8px;padding:8px 16px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:8px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.2)}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-bottom:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#4caf50;animation:_ngcontent-%COMP%_spin 1s linear infinite}.premium-editar-cliente-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#ffffffe6;text-align:center;margin:0}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{margin-bottom:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:50px;color:#ff5252}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#ffffffe6;text-align:center;margin:0 0 20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:8px;padding:8px 16px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.premium-editar-cliente-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ff5252;margin-left:4px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff1a;border-radius:12px;border:1px solid rgba(255,255,255,.2);overflow:hidden;transition:all .3s ease}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]:focus-within{border-color:#fff6;box-shadow:0 0 0 2px #ffffff1a}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container.has-error[_ngcontent-%COMP%]{border-color:#ff5252;box-shadow:0 0 0 2px #ff525233}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;color:#ffffffb3;font-size:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;color:#fff;padding:14px 16px 14px 0;font-size:16px;font-family:inherit}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:8px;color:#ff5252;font-size:14px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]:before{content:"\\2022";margin-right:6px;font-size:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:32px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;background:linear-gradient(135deg,#00796b,#4caf50);color:#fff;border:none;border-radius:12px;padding:16px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 20px #0003}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:8px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000004d}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 6px 15px #0003}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{background:#ffffff1a;color:#ffffff80;box-shadow:none;cursor:not-allowed}@media (max-width: 768px){.premium-editar-cliente-container[_ngcontent-%COMP%]{padding:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]{margin-right:0;margin-bottom:16px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:15px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{width:40px;font-size:18px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding:12px 14px 12px 0;font-size:15px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{padding:14px;font-size:15px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}}@media (min-width: 768px){.premium-editar-cliente-container[_ngcontent-%COMP%]{padding:30px}.premium-editar-cliente-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.form-container[_ngcontent-%COMP%], .loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.ion-content-editar-cliente[_ngcontent-%COMP%]{--background: #0a1e3f}[_nghost-%COMP%]     ion-toast{--background: #162b4d;--color: #ffffff;--border-radius: 8px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .2)}[_nghost-%COMP%]     ion-toast.toast-success{--background: #4caf50}[_nghost-%COMP%]     ion-toast.toast-danger{--background: #ff5252}']});let i=a;return i})();export{On as ProductoEditPage};
