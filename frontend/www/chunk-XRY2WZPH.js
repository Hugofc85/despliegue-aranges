import{a as c,b as s}from"./chunk-X2VJEU3B.js";import{a as l,f as i}from"./chunk-OOWOQ5GQ.js";import{a as d}from"./chunk-RW4GY4BD.js";var g=(()=>{let u=class u{constructor(){this.productosSubject=new l([]),this.productos$=this.productosSubject.asObservable()}getAllProductos(){let r=`${s.url}productos`;return c.get({url:r,headers:{"Content-Type":"application/json"}}).then(o=>{if(console.log("Productos obtenidos:",o),this.productosSubject.next(o.data),o.status===404||o.status===401)throw{status:o.status,message:o.data.error};return o.data}).catch(o=>{throw console.error("Error al obtener productos:",o),o})}getProductoById(r){let o=`${s.url}productos/${r}`;return c.get({url:o,headers:{"Content-Type":"application/json"}}).then(t=>{if(console.log("Producto obtenido:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al obtener el producto:",t),t})}getProductosByUsuarioId(r){let o=`${s.url}productos/usuario/${r}`;return c.get({url:o,headers:{"Content-Type":"application/json"}}).then(t=>{if(console.log("Productos obtenidos por usuario:",t),this.productosSubject.next(t.data),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al obtener productos por usuario:",t),t})}createProducto(r){let o=`${s.url}productos`;return console.log("Creando producto:",r),c.post({url:o,headers:{"Content-Type":"application/json"},data:r}).then(t=>{let a=this.productosSubject.getValue();if(this.productosSubject.next([...a,t.data]),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al crear producto:",t),t})}updateProducto(r,o){let t=`${s.url}productos/${r}`;return console.log("Actualizando producto:",o),c.put({url:t,headers:{"Content-Type":"application/json"},data:o}).then(a=>{if(console.log("Producto actualizado:",a),a.status===404||a.status===401)throw{status:a.status,message:a.data.error};return this.reemplazarProducto(r,o),a.data}).catch(a=>{throw console.error("Error al actualizar producto:",a),a})}deleteProducto(r){let o=`${s.url}productos/${r}`;return c.delete({url:o,headers:{"Content-Type":"application/json"}}).then(t=>{if(console.log("Producto eliminado:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return this.borrarProducto(r),t.data}).catch(t=>{throw console.error("Error al eliminar producto:",t),t})}reemplazarProducto(r,o){let t=this.productosSubject.getValue().map(a=>a.id===r?d(d({},a),o):a);this.productosSubject.next(t)}borrarProducto(r){let o=this.productosSubject.getValue().filter(t=>t.id!==r);this.productosSubject.next(o)}};u.\u0275fac=function(o){return new(o||u)},u.\u0275prov=i({token:u,factory:u.\u0275fac,providedIn:"root"});let e=u;return e})();export{g as a};
