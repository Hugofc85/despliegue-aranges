import{a as J}from"./chunk-BAI6NOAS.js";import{a as H}from"./chunk-2LK4Q67O.js";import"./chunk-ENQTIPMM.js";import{V as R,Z as K,a as D,e as L,j as Y,o as B,u as U}from"./chunk-JZDIRMBR.js";import{C as G,D as V,F as q,l as A}from"./chunk-2UXU5CYN.js";import{$ as r,A as p,Bb as I,Ca as h,Cb as T,D as g,Db as F,Eb as N,F as b,Fb as z,L as e,M as t,N as d,S as P,jb as x,lb as f,mb as j,nb as k,qa as M,rb as y,sb as w,t as s,tb as E,u as l,va as v,w as O,wb as S}from"./chunk-IIYMI45M.js";import"./chunk-QWLURI7L.js";import"./chunk-7KGURMOZ.js";import"./chunk-746R66HB.js";import"./chunk-22YGHXDB.js";import"./chunk-A5VEOJWE.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-4DUJ2VZY.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as _}from"./chunk-RW4GY4BD.js";function W(a,i){a&1&&(e(0,"div",26),r(1," El nombre es obligatorio "),t())}function X(a,i){a&1&&(e(0,"div",26),r(1," El nombre debe tener al menos 2 caracteres "),t())}function Z(a,i){a&1&&(e(0,"div",26),r(1," Los kilos no pueden ser negativos "),t())}function $(a,i){a&1&&(e(0,"div",26),r(1," Las ganancias no pueden ser negativas "),t())}var un=(()=>{let i=class i{constructor(c,o,n,m,u,C,Q){this.formBuilder=c,this.trabajadorService=o,this.loginService=n,this.navController=m,this.toastController=u,this.loadingController=C,this.router=Q,this.isSubmitting=!1,this.trabajadorForm=this.formBuilder.group({nombre:["",[f.required,f.minLength(2)]],kilos:[0,[f.min(0)]],ganancia:[0,[f.min(0)]]})}ngOnInit(){D({personOutline:R,basketOutline:Y,cashOutline:B,arrowBackOutline:L,saveOutline:K,closeCircleOutline:U})}get f(){return this.trabajadorForm.controls}hasError(c,o){let n=this.f[c];return n.hasError(o)&&(n.dirty||n.touched)}volver(){this.navController.back()}guardarTrabajador(){return _(this,null,function*(){var c,o,n;if(Object.keys(this.f).forEach(m=>{this.f[m].markAsTouched()}),this.trabajadorForm.invalid){this.mostrarToast("Por favor, completa correctamente todos los campos obligatorios","danger");return}try{this.isSubmitting=!0;let m=yield this.loadingController.create({message:"Guardando trabajador...",spinner:"circles"});yield m.present();let u=this.loginService.getIdUsuario();if(!u)throw new Error("No se ha encontrado el ID de usuario");let C={nombre:(c=this.trabajadorForm.get("nombre"))==null?void 0:c.value,kilos:(o=this.trabajadorForm.get("kilos"))==null?void 0:o.value,idUsuario:u,ganancia:(n=this.trabajadorForm.get("ganancia"))==null?void 0:n.value};yield this.trabajadorService.createTrabajador(C),yield m.dismiss(),this.mostrarToast("Trabajador guardado correctamente","success"),this.volver()}catch(m){console.error("Error al guardar el trabajador:",m),this.isSubmitting=!1,this.loadingController.dismiss(),this.mostrarToast("Error al guardar el trabajador. Int\xE9ntalo de nuevo.","danger")}})}mostrarToast(c,o="primary"){return _(this,null,function*(){yield(yield this.toastController.create({message:c,duration:3e3,position:"bottom",color:o,buttons:[{icon:"close-circle-outline",role:"cancel"}]})).present()})}};i.\u0275fac=function(o){return new(o||i)(l(T),l(J),l(H),l(z),l(V),l(G),l(h))},i.\u0275cmp=O({type:i,selectors:[["app-formulario-alta"]],decls:47,vars:12,consts:[[1,"ion-content-nuevo-trabajador"],[1,"premium-nuevo-trabajador-container"],[1,"section-header"],[1,"header-back-button"],[1,"back-button",3,"click"],["name","arrow-back-outline"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label"],["for","nombre"],[1,"required"],[1,"input-container"],[1,"input-icon"],["name","person-outline"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre del trabajador",1,"form-input"],["class","error-message",4,"ngIf"],["for","kilos"],["name","basket-outline"],["type","number","id","kilos","formControlName","kilos","placeholder","0","min","0",1,"form-input"],["for","ganancia"],["name","cash-outline"],["type","number","id","ganancia","formControlName","ganancia","placeholder","0","min","0","step","0.01",1,"form-input"],[1,"form-actions"],["type","submit",1,"save-button",3,"disabled"],["name","save-outline"],[1,"error-message"]],template:function(o,n){o&1&&(e(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),P("click",function(){return n.volver()}),d(5,"ion-icon",5),e(6,"span"),r(7,"Volver"),t()()(),e(8,"h1"),r(9,"Nuevo Trabajador"),t()(),e(10,"div",6)(11,"form",7),P("ngSubmit",function(){return n.guardarTrabajador()}),e(12,"div",8)(13,"div",9)(14,"label",10),r(15,"Nombre "),e(16,"span",11),r(17,"*"),t()()(),e(18,"div",12)(19,"div",13),d(20,"ion-icon",14),t(),d(21,"input",15),t(),p(22,W,2,0,"div",16)(23,X,2,0,"div",16),t(),e(24,"div",8)(25,"div",9)(26,"label",17),r(27,"Kilos recogidos"),t()(),e(28,"div",12)(29,"div",13),d(30,"ion-icon",18),t(),d(31,"input",19),t(),p(32,Z,2,0,"div",16),t(),e(33,"div",8)(34,"div",9)(35,"label",20),r(36,"Ganancias (\u20AC)"),t()(),e(37,"div",12)(38,"div",13),d(39,"ion-icon",21),t(),d(40,"input",22),t(),p(41,$,2,0,"div",16),t(),e(42,"div",23)(43,"button",24),d(44,"ion-icon",25),e(45,"span"),r(46,"Guardar Trabajador"),t()()()()()()()),o&2&&(s(11),g("formGroup",n.trabajadorForm),s(7),b("has-error",n.hasError("nombre","required")||n.hasError("nombre","minlength")),s(4),g("ngIf",n.hasError("nombre","required")),s(),g("ngIf",n.hasError("nombre","minlength")),s(5),b("has-error",n.hasError("kilos","min")),s(4),g("ngIf",n.hasError("kilos","min")),s(5),b("has-error",n.hasError("ganancia","min")),s(4),g("ngIf",n.hasError("ganancia","min")),s(2),g("disabled",n.isSubmitting))},dependencies:[A,v,M,F,y,x,w,j,k,I,q,N,E,S],styles:['@charset "UTF-8";.premium-nuevo-trabajador-container[_ngcontent-%COMP%]{padding:20px;min-height:100%;background-color:#0a1e3f;color:#fff}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]{margin-bottom:16px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff26;border:1px solid rgba(255,255,255,.3);border-radius:8px;padding:8px 16px;color:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;margin-right:8px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-back-button[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#ffffff40;transform:translateY(-2px)}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.2)}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;padding:24px;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:24px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:8px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#fff}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ff5252;margin-left:4px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff1a;border-radius:12px;border:1px solid rgba(255,255,255,.2);overflow:hidden;transition:all .3s ease}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]:focus-within{border-color:#fff6;box-shadow:0 0 0 2px #ffffff1a}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container.has-error[_ngcontent-%COMP%]{border-color:#ff5252;box-shadow:0 0 0 2px #ff525233}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;color:#ffffffb3;font-size:20px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;color:#fff;padding:14px 16px 14px 0;font-size:16px;font-family:inherit}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#ffffff80}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .form-input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:8px;color:#ff5252;font-size:14px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]:before{content:"\\2022";margin-right:6px;font-size:16px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:32px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;background:linear-gradient(135deg,#00796b,#4caf50);color:#fff;border:none;border-radius:12px;padding:16px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 8px 20px #0003}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:8px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000004d}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:0 6px 15px #0003}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{background:#ffffff1a;color:#ffffff80;box-shadow:none;cursor:not-allowed}@media (min-width: 768px){.premium-nuevo-trabajador-container[_ngcontent-%COMP%]{padding:30px}.premium-nuevo-trabajador-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.ion-content-nuevo-trabajador[_ngcontent-%COMP%]{--background: #0a1e3f}[_nghost-%COMP%]     ion-toast{--background: #162b4d;--color: #ffffff;--border-radius: 8px;--box-shadow: 0 4px 16px rgba(0, 0, 0, .2)}[_nghost-%COMP%]     ion-toast.toast-success{--background: #4caf50}[_nghost-%COMP%]     ion-toast.toast-danger{--background: #ff5252}']});let a=i;return a})();export{un as FormularioAltaPage};
