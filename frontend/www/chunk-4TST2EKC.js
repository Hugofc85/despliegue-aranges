import{a as V}from"./chunk-QYJZDMND.js";import{a as w}from"./chunk-LO75KPAD.js";import{a as I}from"./chunk-6FKPUFEJ.js";import{a as k}from"./chunk-WT62DDBG.js";import"./chunk-6V6CSYET.js";import{L as y,a as h,j as x,l as q,o as E,r as S}from"./chunk-AARDIVPE.js";import{e as M,q as b}from"./chunk-DIZ7QDBN.js";import{J as e,K as t,L as a,Q as d,Z as o,_ as m,qa as C,t as g,u as l,ua as f,vb as O,w as v}from"./chunk-OOWOQ5GQ.js";import"./chunk-NG6DNF3C.js";import"./chunk-7KGURMOZ.js";import"./chunk-TXAZYJNE.js";import"./chunk-T4LVKIJM.js";import"./chunk-GQVKPUXJ.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-GO752FNZ.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as p}from"./chunk-RW4GY4BD.js";var L=(()=>{let s=class s{constructor(n,r,i,c,u){this.router=n,this.loginService=r,this.productoService=i,this.clienteService=c,this.encargoService=u,this.listaProductos=[],this.listaClientes=[],this.listaEncargos=[],this.totalVentas=0,this.numeroEncargos=0}ngOnInit(){this.cargarClientes(),this.clienteService.clientes$.subscribe(n=>{this.listaClientes=n}),this.cargarProductos(),this.productoService.productos$.subscribe(n=>{this.listaProductos=n,console.log(n)}),this.cargarEncargos(),this.encargoService.encargos$.subscribe(n=>{this.listaEncargos=n,this.calcularEstadisticas()}),h({peopleOutline:y,basketOutline:x,cashOutline:E,calendarOutline:q,chevronForwardOutline:S})}calcularEstadisticas(){this.numeroEncargos=this.listaEncargos.filter(r=>r.estado==="encargado").length;let n=this.listaEncargos.filter(r=>r.estado==="vendido");this.totalVentas=n.reduce((r,i)=>{if(i.total)return r+i.total;let c=0;return i.productos.forEach(u=>{let P=this.listaProductos.find(z=>z.id===u.idProducto);P&&(c+=P.precio*u.cantidad)}),r+c},0)}cargarClientes(){return p(this,null,function*(){try{let n=this.loginService.getIdUsuario();n?yield this.clienteService.getClientesByUsuarioId(n):yield this.clienteService.getAllClientes()}catch(n){console.error("Error al cargar clientes:",n)}})}cargarProductos(){return p(this,null,function*(){try{let n=this.loginService.getIdUsuario();n?yield this.productoService.getProductosByUsuarioId(n):yield this.productoService.getAllProductos()}catch(n){console.error("Error al cargar productos:",n)}})}cargarEncargos(){return p(this,null,function*(){try{let n=this.loginService.getIdUsuario();n?yield this.encargoService.getEncargosByUsuarioId(n):yield this.encargoService.getAllEncargos()}catch(n){console.error("Error al cargar encargos:",n)}})}formatearPrecio(n){return n.toFixed(2)+"\u20AC"}navegarA(n){switch(n){case"clientes":this.router.navigate(["/clientes"]);break;case"productos":this.router.navigate(["/productos"]);break;case"ventas":this.router.navigate(["/ventas"]);break;case"encargos":this.router.navigate(["/encargos"]);break;default:console.error("Secci\xF3n no reconocida:",n)}}};s.\u0275fac=function(r){return new(r||s)(l(f),l(k),l(w),l(I),l(V))},s.\u0275cmp=v({type:s,selectors:[["app-ventas-encargos"]],decls:82,vars:4,consts:[[1,"ion-content-ventas-encargos"],[1,"premium-ventas-encargos-container"],[1,"section-header"],[1,"header-subtitle"],[1,"bloques-grid"],[1,"bloque-card",3,"click"],[1,"bloque-icon"],["name","people-outline"],[1,"bloque-content"],[1,"bloque-arrow"],["name","chevron-forward-outline"],[1,"bloque-icon","productos"],["name","basket-outline"],[1,"bloque-icon","ventas"],["name","cash-outline"],[1,"bloque-icon","encargos"],["name","calendar-outline"],[1,"stats-summary"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"]],template:function(r,i){r&1&&(e(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1"),o(4,"Ventas y Encargos"),t(),e(5,"div",3)(6,"p"),o(7,"Gestiona tus clientes, productos, ventas y encargos"),t()()(),e(8,"div",4)(9,"div",5),d("click",function(){return i.navegarA("clientes")}),e(10,"div",6),a(11,"ion-icon",7),t(),e(12,"div",8)(13,"h2"),o(14,"Clientes"),t(),e(15,"p"),o(16,"Gestiona tu cartera de clientes"),t()(),e(17,"div",9),a(18,"ion-icon",10),t()(),e(19,"div",5),d("click",function(){return i.navegarA("productos")}),e(20,"div",11),a(21,"ion-icon",12),t(),e(22,"div",8)(23,"h2"),o(24,"Productos"),t(),e(25,"p"),o(26,"Administra tu cat\xE1logo de productos"),t()(),e(27,"div",9),a(28,"ion-icon",10),t()(),e(29,"div",5),d("click",function(){return i.navegarA("ventas")}),e(30,"div",13),a(31,"ion-icon",14),t(),e(32,"div",8)(33,"h2"),o(34,"Ventas"),t(),e(35,"p"),o(36,"Registra y consulta tus ventas"),t()(),e(37,"div",9),a(38,"ion-icon",10),t()(),e(39,"div",5),d("click",function(){return i.navegarA("encargos")}),e(40,"div",15),a(41,"ion-icon",16),t(),e(42,"div",8)(43,"h2"),o(44,"Encargos"),t(),e(45,"p"),o(46,"Gestiona pedidos y encargos pendientes"),t()(),e(47,"div",9),a(48,"ion-icon",10),t()()(),e(49,"div",17)(50,"div",18)(51,"div",19),a(52,"ion-icon",7),t(),e(53,"div",20)(54,"div",21),o(55),t(),e(56,"div",22),o(57,"Clientes"),t()()(),e(58,"div",18)(59,"div",19),a(60,"ion-icon",12),t(),e(61,"div",20)(62,"div",21),o(63),t(),e(64,"div",22),o(65,"Productos"),t()()(),e(66,"div",18)(67,"div",19),a(68,"ion-icon",14),t(),e(69,"div",20)(70,"div",21),o(71),t(),e(72,"div",22),o(73,"Ventas"),t()()(),e(74,"div",18)(75,"div",19),a(76,"ion-icon",16),t(),e(77,"div",20)(78,"div",21),o(79),t(),e(80,"div",22),o(81,"Encargos"),t()()()()()()),r&2&&(g(55),m(i.listaClientes.length),g(8),m(i.listaProductos.length),g(8),m(i.formatearPrecio(i.totalVentas)),g(8),m(i.numeroEncargos))},dependencies:[M,C,O,b],styles:[".premium-ventas-encargos-container[_ngcontent-%COMP%]{padding:20px;min-height:100%;background-color:#0a1e3f;color:#fff}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:30px}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#fff;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.2)}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#fffc;margin:0}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-bottom:30px}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #00000040;transition:all .3s ease;display:flex;align-items:center;padding:20px;cursor:pointer}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 28px #00000059}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;background:#2979ff4d;display:flex;align-items:center;justify-content:center;margin-right:16px;transition:all .3s ease}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#2979ff}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon.productos[_ngcontent-%COMP%]{background:#00897b4d}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon.productos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#00897b}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon.ventas[_ngcontent-%COMP%]{background:#4caf504d}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon.ventas[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#4caf50}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon.encargos[_ngcontent-%COMP%]{background:#00796b4d}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-icon.encargos[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#00796b}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-content[_ngcontent-%COMP%]{flex:1}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff;margin:0 0 5px}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#ffffffb3;margin:0}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-arrow[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]   .bloque-arrow[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff9;transition:all .3s ease}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]:hover   .bloque-arrow[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;transform:translate(3px)}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]   .bloque-card[_ngcontent-%COMP%]:hover   .bloque-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#ffffff26;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:12px;padding:16px;border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 12px #0003;transition:all .3s ease;display:flex;align-items:center}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 16px #00000040;background:#fff3}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;background:#fff3;display:flex;align-items:center;justify-content:center;margin-right:12px}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#fff;margin-bottom:2px}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#ffffffe6}@media (max-width: 768px){.premium-ventas-encargos-container[_ngcontent-%COMP%]{padding:16px}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .bloques-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.premium-ventas-encargos-container[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 769px) and (max-width: 1024px){.bloques-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.bloques-grid[_ngcontent-%COMP%], .stats-summary[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.ion-content-ventas-encargos[_ngcontent-%COMP%]{--background: #0a1e3f}"]});let _=s;return _})();export{L as VentasEncargosPage};
