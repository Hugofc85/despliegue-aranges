import{a as o,b as i}from"./chunk-X2VJEU3B.js";import{a as s,f as u}from"./chunk-OOWOQ5GQ.js";import{a as c}from"./chunk-RW4GY4BD.js";var m=(()=>{let l=class l{constructor(){this.clientesSubject=new s([]),this.clientes$=this.clientesSubject.asObservable()}getAllClientes(){let a=`${i.url}clientes`;return o.get({url:a,headers:{"Content-Type":"application/json"}}).then(e=>{if(console.log("Clientes obtenidos:",e),e.status===404||e.status===401)throw{status:e.status,message:e.data.error};return this.clientesSubject.next(e.data),e.data}).catch(e=>{throw console.error("Error al obtener clientes:",e),e})}getClienteById(a){let e=`${i.url}clientes/${a}`;return o.get({url:e,headers:{"Content-Type":"application/json"}}).then(t=>{if(console.log("Cliente obtenido:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al obtener cliente:",t),t})}getClientesByUsuarioId(a){let e=`${i.url}clientes/usuario/${a}`;return o.get({url:e,headers:{"Content-Type":"application/json"}}).then(t=>{if(console.log("Clientes obtenidos por usuario:",t.data),this.clientesSubject.next(t.data),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al obtener clientes por usuario:",t),t})}createCliente(a){let e=`${i.url}clientes`;return console.log(a),o.post({url:e,headers:{"Content-Type":"application/json"},data:a}).then(t=>{let r=this.clientesSubject.getValue();if(this.clientesSubject.next([...r,t.data]),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return t.data}).catch(t=>{throw console.error("Error al crear cliente:",t),t})}updateCliente(a,e){let t=`${i.url}clientes/${a}`;return console.log(e),o.put({url:t,headers:{"Content-Type":"application/json"},data:e}).then(r=>{if(console.log("Cliente actualizado:",r),r.status===404||r.status===401)throw{status:r.status,message:r.data.error};return this.reemplazarCliente(a,e),r.data}).catch(r=>{throw console.error("Error al actualizar cliente:",r),r})}deleteCliente(a){let e=`${i.url}clientes/${a}`;return o.delete({url:e,headers:{"Content-Type":"application/json"}}).then(t=>{if(console.log("Cliente eliminado:",t),t.status===404||t.status===401)throw{status:t.status,message:t.data.error};return this.borrarCliente(a),t.data}).catch(t=>{throw console.error("Error al eliminar cliente:",t),t})}reemplazarCliente(a,e){let t=this.clientesSubject.getValue().map(r=>r.id===a?c(c({},r),e):r);this.clientesSubject.next(t)}borrarCliente(a){let e=this.clientesSubject.getValue().filter(t=>t.id!==a);this.clientesSubject.next(e)}};l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=u({token:l,factory:l.\u0275fac,providedIn:"root"});let n=l;return n})();export{m as a};
